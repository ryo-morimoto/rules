# AIエージェントのためのタスク分解と管理ルール

## 1. 基本原則

1.1. **マイルストーン分析**
   - マイルストーンの達成に必要な全機能を明確にリストアップする
   - 各機能の目的と期待される成果物を具体的に定義する
   - マイルストーンの成功基準を定量的に設定する（例：「性能向上」→「応答速度20%改善」）

1.2. **デプロイ可能単位の定義**
   - 独立してデプロイ可能な最小機能単位に分解する
   - 各単位は単体でテスト可能であること
   - 各単位は明確な価値を提供できること

1.3. **優先順位の明示**
   - ビジネス価値 > 技術的依存関係 > 実装の複雑さ
   - 矛盾が生じた場合は、ユーザー価値を最優先する
   - 重要度に応じて各タスクにP0～P3の優先度を付与する

## 2. タスク分解の手順

2.1. **垂直スライシングの実施**
   - 機能を技術レイヤーではなく、ユーザー価値に基づいて分割する
   - 各スライスはUI〜データベースまでの完全な機能単位とする
   - 例：「ユーザー管理」ではなく「ユーザー登録機能」「プロフィール編集機能」など

2.2. **INVEST原則の適用**
   - Independent：他のタスクへの依存を最小化する
   - Negotiable：実装詳細は柔軟に調整可能にする
   - Valuable：各タスクは単体で価値を提供できること
   - Estimable：工数の見積もりが可能であること
   - Small：1-3日で完了可能な大きさに分割する
   - Testable：明確な検証基準を持つこと

2.3. **依存関係の可視化**
   - タスク間の依存関係を明示的に図示する
   - 依存関係のあるタスクは同一イテレーションに含める
   - クリティカルパスを特定し、リスク対策を立てる

## 3. タスク記述のフォーマット

3.1. **基本情報**
   ```
   タスクID: [一意のID]
   タイトル: [簡潔で明確なタイトル]
   優先度: [P0-P3]
   見積工数: [時間または日数]
   担当者: [担当者名または役割]
   ```

3.2. **内容詳細**
   ```
   目的: [このタスクが解決する問題]
   説明: [具体的な実装内容]
   範囲: [含まれる機能と含まれない機能]
   依存タスク: [前提となるタスクID]
   ```

3.3. **成功基準**
   ```
   受け入れ基準:
   - [具体的な条件1]
   - [具体的な条件2]
   - [具体的な条件3]
   
   テスト条件:
   - [検証方法1]
   - [検証方法2]
   ```

## 4. プロジェクト管理ルール

4.1. **イテレーション管理**
   - イテレーションの期間は2週間を基本とする
   - 各イテレーションの開始時に、タスクの優先順位を再確認する
   - 1つのイテレーションで完了しないタスクは分割する

4.2. **進捗トラッキング**
   - 毎日15分のスタンドアップミーティングを実施する
   - 3つの質問に答える：昨日やったこと、今日やること、障害になっていること
   - かんばんボードで全タスクの状態を可視化する

4.3. **変更管理**
   - 作業開始後の要件変更は変更管理プロセスに従う
   - 優先度P0・P1の変更のみ現行イテレーションで対応
   - 変更による影響範囲を評価し、関連タスクを更新する

## 5. デプロイメントルール

5.1. **デプロイ前チェックリスト**
   ```
   □ 全ての受け入れ基準をパスしている
   □ コードレビューが完了している
   □ 自動テストが全て成功している
   □ パフォーマンス要件を満たしている
   □ セキュリティレビューが完了している
   ```

5.2. **デプロイ手順**
   - デプロイは自動化ツールを使用する
   - デプロイ前に統合環境でのテストを実施する
   - 問題発生時のロールバック手順を明確にする

5.3. **リリース後モニタリング**
   - デプロイ直後は主要メトリクスを継続監視する（最低24時間）
   - ユーザーフィードバックを収集する仕組みを組み込む
   - パフォーマンスとエラー率を定期的に評価する

## 6. 例外処理ルール

6.1. **ブロッカー発生時**
   ```
   [ブロッカーの状況]が発生した場合：
   1. 直ちにチームに通知する
   2. 影響範囲を評価する
   3. 暫定的な回避策を検討する
   4. 必要に応じてタスクの優先順位を調整する
   ```

6.2. **スコープ調整**
   ```
   イテレーション中にタスクが予定より大幅に遅延する場合：
   1. まず、タスクの機能をMVP（最小実装）に縮小可能か検討する
   2. それでも完了が困難な場合、タスクを複数のフェーズに分割する
   3. 現イテレーションでは第一フェーズのみ完了させる
   ```

## 7. フィードバックと改善

7.1. **イテレーション振り返り**
   - 各イテレーション終了時に振り返りを実施する
   - 良かった点、改善点、アクションアイテムを特定する
   - プロセス改善案を次イテレーションに反映する

7.2. **継続的最適化**
   - タスク分解と見積もりの精度を定期的に評価する
   - チームのベロシティを測定し、キャパシティ計画に反映する
   - ボトルネックを特定し、プロセス改善を行う

## 8. 決定基準

状況A: タスクの優先順位付け
  ├── ユーザー価値が高い: 優先度P0または P1に設定
  ├── 技術的依存関係が高い: 優先度P1に設定
  ├── 技術的リスクが高い: 早期に着手し、優先度P1に設定
  └── 上記以外: 優先度P2またはP3に設定

状況B: タスクの粒度判断
  ├── 3日以上かかると予想: さらに小さなタスクに分割
  ├── 明確な成果物がない: タスク定義を見直す
  └── 一人で完結できない: 担当者間で分割を検討

## 9. エラー処理ガイドライン

[タスク見積もりが実際と大きく乖離]した場合：
1. 原因分析を行い、見落としていた要素を特定する
2. 残作業の再見積もりを行う
3. 優先順位とスコープの再調整を検討する
4. 類似タスクの見積もり精度向上に活かす

[予期せぬ技術的な課題]が発生した場合：
1. タイムボックス（最大4時間）で解決策を探る
2. 解決が困難な場合はチーム全体で問題共有を行う
3. 代替アプローチを検討する
4. 必要に応じて外部専門家に相談する

## 効果測定と継続的改善

このルールセットの効果は以下の指標で評価します：

1. デプロイ頻度の向上（目標：2週間に1回以上）
2. リリース後のバグ発生率の低下（目標：前年比30%減）
3. 予定通りに完了するタスクの割合（目標：80%以上）
4. チームメンバーの満足度（目標：4/5以上）

これらの指標を定期的に測定し、ルールセットを継続的に改善していきます。